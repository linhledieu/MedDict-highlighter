{"version":3,"file":"content-script-bundle.js","mappings":";;;;;;;;;;;;;;AAAO,SAASA,MAAMA,CAAC;EAAEC,OAAO,GAAG,MAAM;EAAEC,IAAI,GAAG,CAAC;EAAEC,GAAG,GAAG;AAAE,CAAC,EAAE;EAC5D,OAAQ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmBF,OAAQ;AAC3B;AACA,gBAAgBC,IAAK;AACrB;AACA;AACA,eAAeC,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;AClLA;AACA;;AAEO,MAAMC,QAAQ,GAAI;AACzB;AACA;AACA;AACA;AACA,kCAAkCC,MAAM,CAACC,OAAO,CAACC,MAAM,CAAC,wBAAwB,CAAE;AAClF;AACA,CAAC;;;;;;;;;;;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","sources":["webpack://meddict-highlighter/./main/styles.js","webpack://meddict-highlighter/./main/template.js","webpack://meddict-highlighter/./main/utils.js","webpack://meddict-highlighter/webpack/bootstrap","webpack://meddict-highlighter/webpack/runtime/define property getters","webpack://meddict-highlighter/webpack/runtime/hasOwnProperty shorthand","webpack://meddict-highlighter/webpack/runtime/make namespace object","webpack://meddict-highlighter/./main/highlighter.js"],"sourcesContent":["export function styled({ display = \"none\", left = 0, top = 0 }) {\n    return `\n    /* Style for the main highlighter button */\n    #meddictHighlighter {\n        align-items: center;\n        background-color: #BAD4FF;\n        border-radius: 5px;\n        border: none;\n        cursor: pointer;\n        display: ${display};\n        justify-content: center;\n        left: ${left}px;\n        padding: 5px 10px;\n        position: fixed;\n        top: ${top}px;\n        width: 40px;\n        z-index: 9999;\n    }\n\n    /* Style for the text marker, changes on hover */\n    .text-marker {\n        fill: white;\n    }\n    .text-marker:hover {\n        fill: rgb(213, 234, 255);\n    }\n\n    /* Popup box styling */\n    .popup-box {\n        /* Styling for the background, border, and shadow */\n        background-color: #2E5288FF; \n        border-radius: 10px; \n        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); \n        \n        /* Flexbox for alignment and layout */\n        display: flex; \n        flex-direction: column; \n        align-items: center;\n        \n        /* Typography and padding */\n        font-family: 'Arial', sans-serif; \n        padding: 15px;\n        \n        /* Positioning and size */\n        position: absolute;\n        z-index: 10000;\n        max-width: 300px; /* Adjusted maximum width */\n        width: 80%; /* Adjusted width to be 90% of the container */\n        box-sizing: border-box; \n    }\n\n    /* Responsive design adjustments */\n    @media screen and (max-width: 600px) {\n        .popup-box {\n            width: 95%; /* Full width on smaller screens */\n        }\n    }\n\n    /* Header Section: Styles for the header container */\n    .header-section {\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 20px;\n        flex-wrap: nowrap;\n    }\n    \n    /* Header Title: Style for the main title in the header */\n    .header-section h1 {\n        font-size: 20px;\n        padding: 10px 20px;\n        font-weight: bold;\n        margin: 0;\n        color: white;\n        text-align: left;\n        flex: 1;\n    }\n    \n    /* Meaning Image: Style for images that illustrate meanings */\n    .meaning-image {\n        width: 100%;\n        max-width: 200px;\n        max-height: 200px;\n        height: auto;\n        object-fit: contain;\n        margin-bottom: 15px;\n    }\n    \n    /* Meanings List: Styling for list displaying word meanings */\n    .meanings-list {\n        width: 100%;\n        list-style: none;\n        padding: 0;\n        margin: 0;\n        border-top: 1px solid #ccc;\n        border-bottom: 1px solid #ccc;\n        margin-bottom: 15px;\n    }\n    \n    /* Meaning List Items: Style for individual list items */\n    .meanings-list li {\n        font-size: 14px;\n        padding: 10px;\n        line-height: 1.6;\n        padding: 10px 20px;\n        color: white;\n    } \n    \n    /* Popup Box Links and Buttons: General style for action buttons */\n    .popup-box-link, .search-button {\n        background-color: #007bff;\n        color: white;\n        padding: 10px 20px;\n        text-decoration: none;\n        border-radius: 20px;\n        display: inline-block;\n        font-size: 14px;\n        font-weight: bold;\n        cursor: pointer;\n        margin: 0 20px;\n        text-align: center;\n        line-height: 20px;\n        border: none;\n        box-shadow: none;\n        transition: background-color 0.3s;\n    }\n    \n    /* Hover Effects for Popup Box Links and Buttons */\n    .popup-box-link:hover, .search-button:hover {\n        background-color: #0056b3;\n    }\n    \n    /* Search Button Specific Style */\n    .search-button {\n        background-color: #D32727FF;\n    }\n    \n    /* Hover Style for Search Button */\n    .search-button:hover {\n        background-color: #990000;\n    }\n    \n    /* Sound Button: Style for the sound control button */\n    .sound-button {\n        margin-left: auto;\n        margin-right: 0;\n        width: 40px;\n        height: 40px;\n        background-color: #D32727FF;\n        border-radius: 50%;\n        border: none;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n    }\n    \n    /* Sound Icon: Style for the sound button icon */\n    .sound-icon {\n        width: 70%;\n        height: 50%;\n        fill: #FFFFFF;\n    }\n    \n    /* Hover and Active State Styles for Sound Button */\n    .sound-button:hover {\n        background-color: #FF0000FF;\n    }\n    .sound-button:active {\n        background-color: #990000FF;\n    }\n\n    .blue-button {\n        background-color: #007bff ;\n        color: white; /* You can adjust text color as needed */\n      }\n`;\n}\n","// template.js\n// export const highlightColor = \"rgb(213, 234, 255)\";\n\nexport const template = `\n<template id=\"highlightTemplate\">\n  <span class=\"highlight\" style=\"background-color: transparent; display: inline\"></span>\n</template>\n<button id=\"meddictHighlighter\" style=\"width: 40px; height: 40px;\">\n  <img class=\"text-marker\" src=\"${chrome.runtime.getURL('images/vinuni-icon.png')}\" alt=\"Highlight Icon\" style=\"width: 30px; height: 30px;\" />\n</button>\n`;\n\n","\nexport function capitalize(word) {\n  if (word) {\n    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n  }\n  return word;\n}\n\nexport function lowerCase(word) {\n  if (word) {\n    return word.toLowerCase();\n  }\n  return word;\n}\n\nexport function trimSpaces(str) {\n  return str.replace(/\\s+/g, ' ').trim();\n}\n\nexport function caCase(str) {\n  return str.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g, (m, chr) => chr.toUpperCase());\n}\n\nexport function snaCase(str) {\n  return str.toLowerCase().replace(/\\s+/g, '_');\n}\n\nexport function keCase(str) {\n  return str.toLowerCase().replace(/\\s+/g, '-');\n}\n\nexport function reverseString(str) {\n  return str.split('').reverse().join('');\n}\n\nexport function isPalindrome(str) {\n  const cleanStr = str.replace(/\\W/g, '').toLowerCase();\n  return cleanStr === reverseString(cleanStr);\n}\n\nexport function wordCount(str) {\n  return str.trim().split(/\\s+/).length;\n}\n\nexport function randomString(length) {\n  const chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { styled } from \"./styles.js\";\r\nimport { template } from \"./template.js\";\r\nimport { lowerCase, capitalize } from \"./utils.js\";\r\n\r\n// list all Vietnamese unicode unique characters\r\nconst VIETNAMESE_CHARACTERS = ['à', 'á', 'â', 'ã', 'è', 'é', 'ê', 'ì', 'í', 'ò', 'ó', 'ô', 'õ', 'ù', 'ú', 'ý', 'ă', 'đ', 'ĩ', 'ũ', 'ơ', 'ư', 'ạ', 'ả', 'ấ', 'ầ', 'ẩ', 'ẫ', 'ậ', 'ắ', 'ằ', 'ẳ', 'ẵ', 'ặ', 'ẹ', 'ẻ', 'ẽ', 'ế', 'ề', 'ể', 'ễ', 'ệ', 'ỉ', 'ị', 'ọ', 'ỏ', 'ố', 'ồ', 'ổ', 'ỗ', 'ộ', 'ớ', 'ờ', 'ở', 'ỡ', 'ợ', 'ụ', 'ủ', 'ứ', 'ừ', 'ử', 'ữ', 'ự', 'ỳ', 'ỵ', 'ỷ', 'ỹ']\r\nconst SEARCH_URL = 'https://api.meddict-vinuni.com/words?lang={0}&pattern={1}';\r\n\r\nconst formatString = (template, ...args) => {\r\n  return template.replace(/{([0-9]+)}/g, function (match, index) {\r\n    return typeof args[index] === 'undefined' ? match : args[index];\r\n  });\r\n}\r\n\r\nclass MedDictHighlighter extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this.render();\r\n  }\r\n\r\n  // Getter for marker position attribute\r\n  get markerPosition() {\r\n    return JSON.parse(this.getAttribute(\"markerPosition\") || \"{}\");\r\n  }\r\n\r\n  // Getter for the style element in the shadow DOM\r\n  get styleElement() {\r\n    return this.shadowRoot.querySelector(\"style\");\r\n  }\r\n\r\n  // Getter for the highlight template in the shadow DOM\r\n  get highlightTemplate() {\r\n    return this.shadowRoot.getElementById(\"highlightTemplate\");\r\n  }\r\n\r\n  // Observed attributes for the custom element\r\n  static get observedAttributes() {\r\n    return [\"markerPosition\"];\r\n  }\r\n\r\n  get_language(word) {\r\n    // check if the word contains any Vietnamese character\r\n    for (let i = 0; i < word.length; i++) {\r\n      if (VIETNAMESE_CHARACTERS.includes(word[i])) {\r\n        return 'vn';\r\n      }\r\n    }\r\n    return 'en';\r\n  }\r\n\r\n  // Method to preprocess English words\r\n  preprocessWord(word) {\r\n    if (this.get_language(word) !== 'en') {\r\n      return word; // Return the original word if it's not English\r\n    }\r\n\r\n    // Remove special characters while retaining spaces between words, and apostrophes\r\n    word = word.replace(/[^a-zA-Z0-9'\\s]+|(?<=\\s)'|'(?=\\s)/g, \"\");\r\n\r\n\r\n    // Remove 'ing' from verbs (longer suffixes first)\r\n    if (word.endsWith('ing') && word.length > 4) {\r\n      let base = word.slice(0, -3);\r\n\r\n      // Check if the base ends in a single consonant preceded by a single vowel\r\n      // and the base is not just a single vowel and consonant (to avoid cases like 'at' in 'eating')\r\n      if (/[aeiou][b-df-hj-np-tv-z]$/i.test(base) && base.length > 2) {\r\n        base = base.slice(0, -1); // Remove the last consonant (e.g., running -> runn -> run)\r\n      }\r\n      return base;\r\n    }\r\n\r\n    // Remove 'ed' from verbs\r\n    else if (word.endsWith('ed') && word.length > 3) {\r\n      let base = word.slice(0, -2);\r\n      // Check if the base ends in a single consonant preceded by a single vowel\r\n      if (/[aeiou][b-df-hj-np-tv-z]$/i.test(base) && base.length > 2) {\r\n        base = base.slice(0, -1);\r\n      }\r\n      return base;\r\n    }\r\n\r\n    // Remove 'es' and check if the preceding character is not 's' or 'x'\r\n    else if (word.endsWith('es') && !/(s|x)es$/.test(word) && word.length > 3) {\r\n      // Special case for words like 'diseases' where only the last 's' should be removed\r\n      if (/[aeiou]s$/.test(word)) {\r\n        word = word.slice(0, -1);\r\n      } else {\r\n        word = word.slice(0, -2);\r\n      }\r\n    }\r\n\r\n    // Remove trailing 's' if it's not preceded by a vowel\r\n    else if (word.endsWith('s') && !/[aeiou]s$/.test(word) && word.length > 2) {\r\n      word = word.slice(0, -1);\r\n    }\r\n\r\n    return word;\r\n  }\r\n\r\n  // Method to render the element's content\r\n  render() {\r\n    this.attachShadow({ mode: \"open\" });\r\n\r\n    // Append style element to shadowRoot\r\n    const style = document.createElement(\"style\");\r\n    style.textContent = styled({});\r\n    this.shadowRoot.appendChild(style);\r\n\r\n    // Append the template HTML to shadowRoot\r\n    this.shadowRoot.innerHTML += template;\r\n\r\n    // Add event listener for highlight selection\r\n    this.shadowRoot.getElementById(\"meddictHighlighter\")\r\n      .addEventListener(\"click\", () => this.highlightSelection());\r\n  }\r\n\r\n  // Callback for attribute changes\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (name === \"markerPosition\") {\r\n      this.styleElement.textContent = styled(this.markerPosition);\r\n    }\r\n  }\r\n\r\n  // // Method to highlight a text range\r\n  // highlightRange(range) {\r\n  //   const clone = this.highlightTemplate.cloneNode(true).content.firstElementChild;\r\n  //   clone.appendChild(range.extractContents());\r\n  //   range.insertNode(clone);\r\n  // }\r\n\r\n  // Method to remove all highlights\r\n  removeAllHighlights() {\r\n    const highlights = this.shadowRoot.querySelectorAll('.highlight');\r\n    highlights.forEach(highlight => {\r\n      const parent = highlight.parentNode;\r\n      while (highlight.firstChild) {\r\n        parent.insertBefore(highlight.firstChild, highlight);\r\n      }\r\n      parent.removeChild(highlight);\r\n    });\r\n  }\r\n\r\n  // Method to create the popup box\r\n  createPopupBox(word, meanings, imageUrl, wordFound) {\r\n    // Create the container for the pop-up box\r\n    const popupBox = document.createElement('div');\r\n    popupBox.classList.add('popup-box');\r\n\r\n    // Header section with word and icon\r\n    const headerSection = document.createElement('div');\r\n    headerSection.classList.add('header-section');\r\n\r\n    const wordHeader = document.createElement('h1');\r\n    wordHeader.textContent = word;\r\n    headerSection.appendChild(wordHeader);\r\n\r\n    // Create the button element for sound\r\n    let soundButton = null;\r\n    let suggestButton = null;\r\n\r\n    if (wordFound) {\r\n      soundButton = document.createElement('button');\r\n      soundButton.className = 'sound-button'; // Apply the .sound-button class for styling\r\n\r\n      // Assuming that 'images/sound.png' is the path within your extension's directory\r\n      const iconUrl = chrome.runtime.getURL('images/sound.png');\r\n\r\n      // Create an img element for the icon and append it to the button\r\n      const soundIcon = document.createElement('img');\r\n      soundIcon.src = iconUrl; // Set the image source\r\n      soundIcon.alt = 'Sound icon'; // Set alternative text for the image\r\n      soundIcon.className = 'sound-icon'; // Use .sound-icon class for styling\r\n\r\n      // Append the image icon to the button\r\n      soundButton.appendChild(soundIcon);\r\n\r\n      // Append the sound button to the header section\r\n      headerSection.appendChild(soundButton);\r\n    } else {\r\n      // Create the suggest button when word is not found\r\n      suggestButton = document.createElement('button');\r\n      suggestButton.textContent = 'Suggest';\r\n      suggestButton.className = 'suggest-button'; // Apply the .suggest-button class for styling\r\n      suggestButton.classList.add('popup-box-link', 'search-button');\r\n      // Append the suggest button to the header section\r\n      headerSection.appendChild(suggestButton);\r\n    }\r\n\r\n    // Append the header section to the popup box\r\n    popupBox.appendChild(headerSection);\r\n\r\n    // Add the image for meaning illustration\r\n    const image = new Image();\r\n    image.src = imageUrl;\r\n    image.alt = 'Meaning illustration';\r\n    image.classList.add('meaning-image');\r\n    popupBox.appendChild(image);\r\n\r\n    // Add the meanings list\r\n    const meaningsList = document.createElement('ol');\r\n    meaningsList.classList.add('meanings-list');\r\n    meanings.forEach(meaning => {\r\n      const listItem = document.createElement('li');\r\n      listItem.textContent = meaning;\r\n      meaningsList.appendChild(listItem);\r\n    });\r\n    popupBox.appendChild(meaningsList);\r\n\r\n    // Buttons container\r\n    const buttonsContainer = document.createElement('div');\r\n    buttonsContainer.style.display = 'flex'; // Ensure buttons are in-line\r\n\r\n    //linkButton for Google search\r\n    const linkButton = document.createElement('a');\r\n    linkButton.textContent = 'Google';\r\n    linkButton.target = '_blank';\r\n    linkButton.classList.add('popup-box-link');\r\n    linkButton.onclick = () => {\r\n      // Encode the highlighted word\r\n      const encodedWord = encodeURIComponent(word);\r\n      const googleUrl = `https://www.google.com/search?q=${encodedWord}`;\r\n      linkButton.href = googleUrl;\r\n    };\r\n    buttonsContainer.appendChild(linkButton);\r\n\r\n    // searchButton for Wikipedia search\r\n    const searchButton = document.createElement('button');\r\n    searchButton.textContent = 'Wikipedia';\r\n    searchButton.classList.add('popup-box-link', 'search-button');  // Reuse the same class for similar styling\r\n    searchButton.onclick = () => {\r\n      // Encode the highlighted word\r\n      const encodedWord = encodeURIComponent(word);\r\n\r\n      // Determine the language of the word (English or Vietnamese)\r\n      const language = this.get_language(word);\r\n\r\n      // Construct the Wikipedia search URL based on the language\r\n      let wikiUrl;\r\n      if (language === 'en') {\r\n        // English language, use English Wikipedia\r\n        wikiUrl = `https://en.wikipedia.org/wiki/${encodedWord}`;\r\n        console.log(wikiUrl)\r\n      } else if (language === 'vn') {\r\n        // Vietnamese language, use Vietnamese Wikipedia\r\n        wikiUrl = `https://vi.wikipedia.org/w/index.php?go=Go&search=${encodedWord}`;\r\n      } else {\r\n        // Default to English Wikipedia if language is not determined\r\n        wikiUrl = `https://en.wikipedia.org/wiki/Special:Search?search=${encodedWord}`;\r\n      }\r\n\r\n      window.open(wikiUrl, '_blank');\r\n    };\r\n\r\n    buttonsContainer.appendChild(searchButton);\r\n\r\n    // Append buttons container to popup box\r\n    popupBox.appendChild(buttonsContainer);\r\n\r\n    return { popupBox, soundButton };\r\n  }\r\n\r\n  // Method to show the popup box\r\n  showPopupBox(range, word, meanings, imageUrl, wordFound) {\r\n    // Remove any existing pop-up box\r\n    const existingPopup = this.shadowRoot.querySelector('.popup-box');\r\n    if (existingPopup) {\r\n      existingPopup.remove();\r\n    }\r\n\r\n    const { popupBox, soundButton } = this.createPopupBox(word, meanings, imageUrl, wordFound);\r\n\r\n    this.shadowRoot.appendChild(popupBox);\r\n\r\n    const rect = range.getBoundingClientRect();\r\n    popupBox.style.position = 'absolute';\r\n    popupBox.style.top = `${window.scrollY + rect.bottom + 10}px`;\r\n    popupBox.style.left = `${window.scrollX + rect.left}px`;\r\n\r\n    return soundButton\r\n  }\r\n\r\n  // Checks if a click event is outside the popup, and if so, initiates cleanup.\r\n  isClickOutsidePopup(event) {\r\n    const popupBox = this.shadowRoot.querySelector('.popup-box');\r\n    if (popupBox && !popupBox.contains(event.target)) {\r\n      this.closePopupAndReset();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Consolidates the cleanup process into a single method.\r\n  closePopupAndReset() {\r\n    // Remove the popup box\r\n    const popupBox = this.shadowRoot.querySelector('.popup-box');\r\n    if (popupBox) {\r\n      popupBox.remove();\r\n    }\r\n    // Remove all highlights\r\n    this.removeAllHighlights();\r\n  }\r\n\r\n  // Method to find a word in API data\r\n  findWordInData(word, data) {\r\n    for (let item of data) {\r\n      if (item.en.toLowerCase() === word.toLowerCase() || item.vn.toLowerCase() === word.toLowerCase()) {\r\n        return [item];\r\n      }\r\n    }\r\n    return \"Not Found\";\r\n  }\r\n\r\n\r\n  handleSuggestButtonClick(searchWord, language) {\r\n    const payload = { suggestion: searchWord, lang: language };\r\n    fetch('https://api.meddict-vinuni.com/words/suggestions', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(payload)\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        if (data.success) {\r\n          console.log('Suggestion successfully submitted:', data);\r\n        } else {\r\n          console.log(data);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Network error:', error);\r\n      });\r\n  }\r\n\r\n  highlightSelection() {\r\n    const userSelection = window.getSelection();\r\n    for (let i = 0; i < userSelection.rangeCount; i++) {\r\n      const range = userSelection.getRangeAt(i);\r\n      let search_word = lowerCase(range.toString()).trim();\r\n      let language = this.get_language(search_word);\r\n      search_word = this.preprocessWord(search_word);\r\n      let url = encodeURI(`https://api.meddict-vinuni.com/words?lang=${language}&pattern=${search_word}`);\r\n      console.log(url)\r\n      console.log(search_word)\r\n      fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          let filteredData = this.findWordInData(search_word, data);\r\n          if (filteredData !== \"Not Found\" && filteredData.length > 0) {\r\n            // Exact word found\r\n            let wordData = filteredData[0];\r\n            const meanings = [(language === \"en\" ? wordData.vn : wordData.en)];\r\n            const imgID = wordData[\"id\"];\r\n            const dictWord = wordData[language];\r\n            let imageUrl = `https://api.meddict-vinuni.com/words/illustration/${imgID}`;\r\n            const soundButton = this.showPopupBox(range, dictWord, meanings, imageUrl, true);\r\n            soundButton.addEventListener('click', () => {\r\n              const audio = new Audio(`https://api.meddict-vinuni.com/words/sound/${language}/${imgID}`);\r\n              audio.play().catch(error => console.error('Error playing the sound:', error));\r\n            });\r\n          } else if (data.length > 0) {\r\n            // Partial match found, suggest top 3 words and their meanings\r\n            let topWords = data.slice(0, 3);\r\n            let meanings = topWords.map(item => `${language === 'en' ? item.en : item.vn}: ${language === 'en' ? item.vn : item.en}`);\r\n            const imageURL = chrome.runtime.getURL('images/suggestion.png');\r\n            this.showPopupBox(range, search_word, meanings, imageURL, false);\r\n            // Add event listener to the suggestButton\r\n            const suggestButton = this.shadowRoot.querySelector('.suggest-button');\r\n            suggestButton.addEventListener('click', () => {\r\n              // Pass the appropriate values for search_word and language to the function\r\n              this.handleSuggestButtonClick(search_word, language);\r\n              suggestButton.classList.add('blue-button');\r\n            });\r\n          } else {\r\n            // Word not found\r\n            const meanings = ['If you want to contribute this word to our website, please click the button above.'];\r\n            const imageURL = chrome.runtime.getURL('images/404.png');\r\n            this.showPopupBox(range, search_word, meanings, imageURL, false);\r\n            // Add event listener to the suggestButton\r\n            const suggestButton = this.shadowRoot.querySelector('.suggest-button');\r\n            suggestButton.addEventListener('click', () => {\r\n              // Pass the appropriate values for search_word and language to the function\r\n              this.handleSuggestButtonClick(search_word, language);\r\n              suggestButton.classList.add('blue-button');\r\n            });\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log('Fetch error:', error);\r\n          // Handle fetch error\r\n          const meanings = ['Error fetching data.'];\r\n          const imageURL = chrome.runtime.getURL('images/404.png');\r\n          this.showPopupBox(range, search_word, meanings, imageURL, false);\r\n        });\r\n    }\r\n    userSelection.removeAllRanges();\r\n  }\r\n}\r\nwindow.customElements.define(\"meddict-highlighter\", MedDictHighlighter);"],"names":["styled","display","left","top","template","chrome","runtime","getURL","capitalize","word","charAt","toUpperCase","slice","toLowerCase","lowerCase","trimSpaces","str","replace","trim","caCase","m","chr","snaCase","keCase","reverseString","split","reverse","join","isPalindrome","cleanStr","wordCount","length","randomString","chars","result","i","Math","floor","random","VIETNAMESE_CHARACTERS","SEARCH_URL","formatString","args","match","index","MedDictHighlighter","HTMLElement","constructor","render","markerPosition","JSON","parse","getAttribute","styleElement","shadowRoot","querySelector","highlightTemplate","getElementById","observedAttributes","get_language","includes","preprocessWord","endsWith","base","test","attachShadow","mode","style","document","createElement","textContent","appendChild","innerHTML","addEventListener","highlightSelection","attributeChangedCallback","name","oldValue","newValue","removeAllHighlights","highlights","querySelectorAll","forEach","highlight","parent","parentNode","firstChild","insertBefore","removeChild","createPopupBox","meanings","imageUrl","wordFound","popupBox","classList","add","headerSection","wordHeader","soundButton","suggestButton","className","iconUrl","soundIcon","src","alt","image","Image","meaningsList","meaning","listItem","buttonsContainer","linkButton","target","onclick","encodedWord","encodeURIComponent","googleUrl","href","searchButton","language","wikiUrl","console","log","window","open","showPopupBox","range","existingPopup","remove","rect","getBoundingClientRect","position","scrollY","bottom","scrollX","isClickOutsidePopup","event","contains","closePopupAndReset","findWordInData","data","item","en","vn","handleSuggestButtonClick","searchWord","payload","suggestion","lang","fetch","method","headers","body","stringify","then","response","json","success","catch","error","userSelection","getSelection","rangeCount","getRangeAt","search_word","toString","url","encodeURI","filteredData","wordData","imgID","dictWord","audio","Audio","play","topWords","map","imageURL","removeAllRanges","customElements","define"],"sourceRoot":""}