{"version":3,"file":"content-script-bundle.js","mappings":";;;;;;;;;;;;;;AAAO,SAASA,MAAMA,CAAC;EAAEC,OAAO,GAAG,MAAM;EAAEC,IAAI,GAAG,CAAC;EAAEC,GAAG,GAAG;AAAE,CAAC,EAAE;EAC5D,OAAQ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmBF,OAAQ;AAC3B;AACA,gBAAgBC,IAAK;AACrB;AACA;AACA,eAAeC,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;AClJA;AACA;;AAEO,MAAMC,QAAQ,GAAI;AACzB;AACA;AACA;AACA;AACA,kCAAkCC,MAAM,CAACC,OAAO,CAACC,MAAM,CAAC,wBAAwB,CAAE;AAClF;AACA,CAAC;;;;;;;;;;;;;;;ACTM,SAASC,UAAUA,CAACC,IAAI,EAAE;EAC/B,IAAIA,IAAI,EAAE;IACR,OAAOA,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,C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","sources":["webpack://meddict-highlighter/./main/styles.js","webpack://meddict-highlighter/./main/template.js","webpack://meddict-highlighter/./main/utils.js","webpack://meddict-highlighter/webpack/bootstrap","webpack://meddict-highlighter/webpack/runtime/define property getters","webpack://meddict-highlighter/webpack/runtime/hasOwnProperty shorthand","webpack://meddict-highlighter/webpack/runtime/make namespace object","webpack://meddict-highlighter/./main/highlighter.js"],"sourcesContent":["export function styled({ display = \"none\", left = 0, top = 0 }) {\n    return `\n    #meddictHighlighter {\n        align-items: center;\n        background-color: #BAD4FF;\n        border-radius: 5px;\n        border: none;\n        cursor: pointer;\n        display: ${display};\n        justify-content: center;\n        left: ${left}px;\n        padding: 5px 10px;\n        position: fixed;\n        top: ${top}px;\n        width: 40px;\n        z-index: 9999;\n    }\n    .text-marker {\n        fill: white;\n    }\n    .text-marker:hover {\n        fill: rgb(213, 234, 255);\n    }\n\n    .popup-box {\n        background-color: #2E5288FF; \n        border-radius: 10px; \n        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); \n        display: flex; \n        flex-direction: column; \n        align-items: center;\n        font-family: 'Arial', sans-serif; \n        padding: 15px;\n        position: absolute;\n        z-index: 10000;\n        max-width: 300px; /* Adjusted maximum width */\n        width: 80%; /* Adjusted width to be 90% of the container */\n        box-sizing: border-box; \n    }\n    \n    .header-section {\n        width: 100%; /* Take the full width of its container */\n        display: flex; \n        justify-content: space-between; /* Space content between left and right sides */\n        align-items: center; /* Center content vertically */\n        margin-bottom: 20px; \n        flex-wrap: nowrap; // Prevent wrapping of child elements\n        justify-content: space-between; // Space out children\n\n    }\n\n    .header-section h1 {\n        font-size: 20px; \n        font-weight: bold; \n        margin: 0; \n        color: white; \n        text-align: left; /* Align the text to the left */\n        flex: 1; /* Allows the h1 to grow and take available space */\n    }\n    \n    .meaning-image {\n        width: 100%; /* Adjust width to 100% of its container */\n        max-width: 200px; /* Maximum width of the image */\n        max-height: 200px; /* Maximum height of the image */\n        height: auto; /* Ensure height adjusts automatically */\n        object-fit: contain; /* Maintain aspect ratio within given dimensions */\n        margin-bottom: 15px; \n    }\n    \n    .meanings-list {\n        width: 100%; \n        list-style: none; \n        padding: 0; \n        margin: 0;\n        border-top: 1px solid #ccc; \n        border-bottom: 1px solid #ccc; \n        margin-bottom: 15px; /* Increased bottom margin */\n    }\n    \n    .meanings-list li {\n        font-size: 14px; \n        line-height: 1.6; \n        padding: 10px 0; \n        color: white; \n    } \n    \n    .popup-box-link, .search-button {\n        background-color: #007bff; /* Blue background for MedDict button */\n        color: white; /* White text */\n        padding: 10px 20px; /* Adjusted padding for vertical centering */\n        text-decoration: none;\n        border-radius: 20px;\n        display: inline-block;\n        font-size: 14px;\n        font-weight: bold;\n        cursor: pointer;\n        margin: 0 20px; /* Space between buttons */\n        text-align: center; /* Center text horizontally */\n        line-height: 20px; /* Adjust line height to vertically center the text */\n        border: none; /* Remove any borders */\n        box-shadow: none; /* Remove any box shadows */\n        transition: background-color 0.3s; /* Smooth background color transition on hover */\n    }\n\n    .popup-box-link:hover, .search-button:hover {\n        background-color: #0056b3; // Darker blue on hover for MedDict button\n    }\n\n    .search-button {\n        background-color: #D32727FF; \n        box-shadow: none;\n        border: none;\n    }\n\n    .search-button:hover {\n        background-color: #990000; // Lighter red on hover\n    }\n    \n    .sound-button {\n        margin-left: auto;\n        margin-right: 0;\n        width: 40px; /* Reduced width */\n        height: 40px; /* Reduced height */\n        background-color: #D32727FF;\n        border-radius: 50%;\n        border: none;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n    }\n    \n    .sound-icon {\n        width: 70%; /* Adjusted size */\n        height: 50%; /* Adjusted size */\n        fill: #FFFFFF;\n    }\n    \n    .sound-button:hover {\n        background-color: #FF0000FF;\n    }\n    \n    .sound-button:active {\n        background-color: #990000FF;\n    }\n`;\n}\n","// template.js\n// export const highlightColor = \"rgb(213, 234, 255)\";\n\nexport const template = `\n<template id=\"highlightTemplate\">\n  <span class=\"highlight\" style=\"background-color: transparent; display: inline\"></span>\n</template>\n<button id=\"meddictHighlighter\" style=\"width: 40px; height: 40px;\">\n  <img class=\"text-marker\" src=\"${chrome.runtime.getURL('images/vinuni-icon.png')}\" alt=\"Highlight Icon\" style=\"width: 30px; height: 30px;\" />\n</button>\n`;\n\n","\nexport function capitalize(word) {\n  if (word) {\n    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n  }\n  return word;\n}\n\nexport function lowerCase(word) {\n  if (word) {\n    return word.toLowerCase();\n  }\n  return word;\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { styled } from \"./styles.js\";\r\nimport { template } from \"./template.js\";\r\nimport { lowerCase, capitalize } from \"./utils.js\";\r\n\r\n// list all Vietnamese unicode unique characters\r\nconst VIETNAMESE_CHARACTERS = ['à', 'á', 'â', 'ã', 'è', 'é', 'ê', 'ì', 'í', 'ò', 'ó', 'ô', 'õ', 'ù', 'ú', 'ý', 'ă', 'đ', 'ĩ', 'ũ', 'ơ', 'ư', 'ạ', 'ả', 'ấ', 'ầ', 'ẩ', 'ẫ', 'ậ', 'ắ', 'ằ', 'ẳ', 'ẵ', 'ặ', 'ẹ', 'ẻ', 'ẽ', 'ế', 'ề', 'ể', 'ễ', 'ệ', 'ỉ', 'ị', 'ọ', 'ỏ', 'ố', 'ồ', 'ổ', 'ỗ', 'ộ', 'ớ', 'ờ', 'ở', 'ỡ', 'ợ', 'ụ', 'ủ', 'ứ', 'ừ', 'ử', 'ữ', 'ự', 'ỳ', 'ỵ', 'ỷ', 'ỹ']\r\nconst SEARCH_URL = 'https://api.meddict-vinuni.com/words?lang={0}&pattern={1}';\r\n\r\nconst formatString = (template, ...args) => {\r\n  return template.replace(/{([0-9]+)}/g, function (match, index) {\r\n    return typeof args[index] === 'undefined' ? match : args[index];\r\n  });\r\n}\r\n\r\nclass MedDictHighlighter extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this.render();\r\n  }\r\n\r\n  // Getter for marker position attribute\r\n  get markerPosition() {\r\n    return JSON.parse(this.getAttribute(\"markerPosition\") || \"{}\");\r\n  }\r\n\r\n  // Getter for the style element in the shadow DOM\r\n  get styleElement() {\r\n    return this.shadowRoot.querySelector(\"style\");\r\n  }\r\n\r\n  // Getter for the highlight template in the shadow DOM\r\n  get highlightTemplate() {\r\n    return this.shadowRoot.getElementById(\"highlightTemplate\");\r\n  }\r\n\r\n  // Observed attributes for the custom element\r\n  static get observedAttributes() {\r\n    return [\"markerPosition\"];\r\n  }\r\n\r\n  get_language(word) {\r\n    // check if the word contains any Vietnamese character\r\n    for (let i = 0; i < word.length; i++) {\r\n      if (VIETNAMESE_CHARACTERS.includes(word[i])) {\r\n        return 'vn';\r\n      }\r\n    }\r\n    return 'en';\r\n  }\r\n\r\n  // Method to preprocess English words\r\n  preprocessWord(word) {\r\n    if (this.get_language(word) !== 'en') {\r\n      return word; // Return the original word if it's not English\r\n    }\r\n\r\n    // Remove special characters while retaining spaces between words, and apostrophes\r\n    word = word.replace(/[^a-zA-Z0-9'\\s]+|(?<=\\s)'|'(?=\\s)/g, \"\");\r\n\r\n\r\n    // Remove 'ing' from verbs (longer suffixes first)\r\n    if (word.endsWith('ing') && word.length > 4) {\r\n      let base = word.slice(0, -3);\r\n\r\n      // Check if the base ends in a single consonant preceded by a single vowel\r\n      // and the base is not just a single vowel and consonant (to avoid cases like 'at' in 'eating')\r\n      if (/[aeiou][b-df-hj-np-tv-z]$/i.test(base) && base.length > 2) {\r\n        base = base.slice(0, -1); // Remove the last consonant (e.g., running -> runn -> run)\r\n      }\r\n      return base;\r\n    }\r\n\r\n    // Remove 'ed' from verbs\r\n    else if (word.endsWith('ed') && word.length > 3) {\r\n      let base = word.slice(0, -2);\r\n      // Check if the base ends in a single consonant preceded by a single vowel\r\n      if (/[aeiou][b-df-hj-np-tv-z]$/i.test(base) && base.length > 2) {\r\n        base = base.slice(0, -1);\r\n      }\r\n      return base;\r\n    }\r\n\r\n    // Remove 'es' and check if the preceding character is not 's' or 'x'\r\n    else if (word.endsWith('es') && !/(s|x)es$/.test(word) && word.length > 3) {\r\n      // Special case for words like 'diseases' where only the last 's' should be removed\r\n      if (/[aeiou]s$/.test(word)) {\r\n        word = word.slice(0, -1);\r\n      } else {\r\n        word = word.slice(0, -2);\r\n      }\r\n    }\r\n\r\n    // Remove trailing 's' if it's not preceded by a vowel\r\n    else if (word.endsWith('s') && !/[aeiou]s$/.test(word) && word.length > 2) {\r\n      word = word.slice(0, -1);\r\n    }\r\n\r\n    return word;\r\n  }\r\n\r\n  // Method to render the element's content\r\n  render() {\r\n    this.attachShadow({ mode: \"open\" });\r\n\r\n    // Append style element to shadowRoot\r\n    const style = document.createElement(\"style\");\r\n    style.textContent = styled({});\r\n    this.shadowRoot.appendChild(style);\r\n\r\n    // Append the template HTML to shadowRoot\r\n    this.shadowRoot.innerHTML += template;\r\n\r\n    // Add event listener for highlight selection\r\n    this.shadowRoot.getElementById(\"meddictHighlighter\")\r\n      .addEventListener(\"click\", () => this.highlightSelection());\r\n  }\r\n\r\n  // Callback for attribute changes\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (name === \"markerPosition\") {\r\n      this.styleElement.textContent = styled(this.markerPosition);\r\n    }\r\n  }\r\n\r\n  // // Method to highlight a text range\r\n  // highlightRange(range) {\r\n  //   const clone = this.highlightTemplate.cloneNode(true).content.firstElementChild;\r\n  //   clone.appendChild(range.extractContents());\r\n  //   range.insertNode(clone);\r\n  // }\r\n\r\n  // Method to remove all highlights\r\n  removeAllHighlights() {\r\n    const highlights = this.shadowRoot.querySelectorAll('.highlight');\r\n    highlights.forEach(highlight => {\r\n      const parent = highlight.parentNode;\r\n      while (highlight.firstChild) {\r\n        parent.insertBefore(highlight.firstChild, highlight);\r\n      }\r\n      parent.removeChild(highlight);\r\n    });\r\n  }\r\n\r\n  // Method to create the popup box\r\n  // Method to create the popup box\r\n  createPopupBox(word, meanings, imageUrl, wordFound = true) {\r\n    // Create the container for the pop-up box\r\n    const popupBox = document.createElement('div');\r\n    popupBox.classList.add('popup-box');\r\n\r\n    // Header section with word and icon\r\n    const headerSection = document.createElement('div');\r\n    headerSection.classList.add('header-section');\r\n\r\n    const wordHeader = document.createElement('h1');\r\n    wordHeader.textContent = word;\r\n    headerSection.appendChild(wordHeader);\r\n\r\n    // Create the button element for sound\r\n    const soundButton = document.createElement('button');\r\n    soundButton.className = 'sound-button'; // Apply the .sound-button class for styling\r\n\r\n    // Assuming that 'images/sound.png' is the path within your extension's directory\r\n    const iconUrl = chrome.runtime.getURL('images/sound.png');\r\n\r\n    // Create an img element for the icon and append it to the button\r\n    const soundIcon = document.createElement('img');\r\n    soundIcon.src = iconUrl; // Set the image source\r\n    soundIcon.alt = 'Sound icon'; // Set alternative text for the image\r\n    soundIcon.className = 'sound-icon'; // Use .sound-icon class for styling\r\n\r\n    // Append the image icon to the button\r\n    soundButton.appendChild(soundIcon);\r\n\r\n    // Append the sound button to the header section\r\n    headerSection.appendChild(soundButton);\r\n\r\n    // Append the header section to the popup box\r\n    popupBox.appendChild(headerSection);\r\n\r\n    // Add the image for meaning illustration\r\n    const image = new Image();\r\n    image.src = imageUrl;\r\n    image.alt = 'Meaning illustration';\r\n    image.classList.add('meaning-image');\r\n    popupBox.appendChild(image);\r\n\r\n    // Add the meanings list\r\n    const meaningsList = document.createElement('ol');\r\n    meaningsList.classList.add('meanings-list');\r\n    meanings.forEach(meaning => {\r\n      const listItem = document.createElement('li');\r\n      listItem.textContent = meaning;\r\n      meaningsList.appendChild(listItem);\r\n    });\r\n    popupBox.appendChild(meaningsList);\r\n\r\n    // Buttons container\r\n    const buttonsContainer = document.createElement('div');\r\n    buttonsContainer.style.display = 'flex'; // Ensure buttons are in-line\r\n\r\n    // Modify the linkButton for Google search\r\n    const linkButton = document.createElement('a');\r\n    linkButton.textContent = 'Google';\r\n    linkButton.target = '_blank';\r\n    linkButton.classList.add('popup-box-link');\r\n    linkButton.onclick = () => {\r\n      // Encode the highlighted word\r\n      const encodedWord = encodeURIComponent(word);\r\n      const googleUrl = `https://www.google.com/search?q=${encodedWord}`;\r\n      linkButton.href = googleUrl;\r\n    };\r\n    buttonsContainer.appendChild(linkButton);\r\n\r\n    // Modify the searchButton for Wikipedia search\r\n    const searchButton = document.createElement('button');\r\n    searchButton.textContent = 'Wikipedia';\r\n    searchButton.classList.add('popup-box-link', 'search-button');  // Reuse the same class for similar styling\r\n    searchButton.onclick = () => {\r\n      // Encode the highlighted word\r\n      const encodedWord = encodeURIComponent(word);\r\n\r\n      // Determine the language of the word (English or Vietnamese)\r\n      const language = this.get_language(word);\r\n\r\n      // Construct the Wikipedia search URL based on the language\r\n      let wikiUrl;\r\n      if (language === 'en') {\r\n        // English language, use English Wikipedia\r\n        wikiUrl = `https://en.wikipedia.org/wiki/${encodedWord}`;\r\n        console.log(wikiUrl)\r\n      } else if (language === 'vn') {\r\n        // Vietnamese language, use Vietnamese Wikipedia\r\n        wikiUrl = `https://vi.wikipedia.org/w/index.php?go=Go&search=${encodedWord}`;\r\n      } else {\r\n        // Default to English Wikipedia if language is not determined\r\n        wikiUrl = `https://en.wikipedia.org/wiki/Special:Search?search=${encodedWord}`;\r\n      }\r\n\r\n      window.open(wikiUrl, '_blank');\r\n    };\r\n\r\n    buttonsContainer.appendChild(searchButton);\r\n\r\n\r\n\r\n    // Append buttons container to popup box\r\n    popupBox.appendChild(buttonsContainer);\r\n\r\n    // Adjust visibility based on wordFound\r\n    if (!wordFound) {\r\n      soundButton.style.display = 'none'; // Hide sound button\r\n      imageUrl = chrome.runtime.getURL('images/404.png'); // Set default not found image\r\n    }\r\n\r\n    return { popupBox, soundButton };\r\n  }\r\n\r\n  // Method to show the popup box\r\n  showPopupBox(range, word, meanings, imageUrl) {\r\n    // Remove any existing pop-up box\r\n    const existingPopup = this.shadowRoot.querySelector('.popup-box');\r\n    if (existingPopup) {\r\n      existingPopup.remove();\r\n    }\r\n\r\n    const { popupBox, soundButton } = this.createPopupBox(word, meanings, imageUrl);\r\n\r\n    this.shadowRoot.appendChild(popupBox);\r\n\r\n    const rect = range.getBoundingClientRect();\r\n    popupBox.style.position = 'absolute';\r\n    popupBox.style.top = `${window.scrollY + rect.bottom + 10}px`;\r\n    popupBox.style.left = `${window.scrollX + rect.left}px`;\r\n\r\n    return soundButton\r\n  }\r\n\r\n  // Checks if a click event is outside the popup, and if so, initiates cleanup.\r\n  isClickOutsidePopup(event) {\r\n    const popupBox = this.shadowRoot.querySelector('.popup-box');\r\n    if (popupBox && !popupBox.contains(event.target)) {\r\n      this.closePopupAndReset();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Consolidates the cleanup process into a single method.\r\n  closePopupAndReset() {\r\n    // Remove the popup box\r\n    const popupBox = this.shadowRoot.querySelector('.popup-box');\r\n    if (popupBox) {\r\n      popupBox.remove();\r\n    }\r\n    // Remove all highlights\r\n    this.removeAllHighlights();\r\n  }\r\n\r\n  // Method to find a word in API data\r\n  findWordInData(word, data) {\r\n    for (let item of data) {\r\n      if (item.en.toLowerCase() === word.toLowerCase() || item.vn.toLowerCase() === word.toLowerCase()) {\r\n        return [item];\r\n      }\r\n    }\r\n    return \"Not Found\";\r\n  }\r\n\r\n\r\n  highlightSelection() {\r\n    const userSelection = window.getSelection();\r\n    for (let i = 0; i < userSelection.rangeCount; i++) {\r\n      const range = userSelection.getRangeAt(i);\r\n      let search_word = lowerCase(range.toString()).trim();\r\n      let language = this.get_language(search_word);\r\n      search_word = this.preprocessWord(search_word);\r\n      let url = encodeURI(`https://api.meddict-vinuni.com/words?lang=${language}&pattern=${search_word}`);\r\n      console.log(url)\r\n      console.log(search_word)\r\n      fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          let filteredData = this.findWordInData(search_word, data);\r\n          if (filteredData !== \"Not Found\" && filteredData.length > 0) {\r\n            // Exact word found\r\n            let wordData = filteredData[0];\r\n            const meanings = [(language === \"en\" ? wordData.vn : wordData.en)];\r\n            const imgID = wordData[\"id\"];\r\n            const dictWord = wordData[language];\r\n            let imageUrl = `https://api.meddict-vinuni.com/words/illustration/${imgID}`;\r\n            const soundButton = this.showPopupBox(range, dictWord, meanings, imageUrl);\r\n            soundButton.addEventListener('click', () => {\r\n              const audio = new Audio(`https://api.meddict-vinuni.com/words/sound/${language}/${imgID}`);\r\n              audio.play().catch(error => console.error('Error playing the sound:', error));\r\n            });\r\n          } else if (data.length > 0) {\r\n            // Partial match found, suggest top 3 words and their meanings\r\n            let topWords = data.slice(0, 3);\r\n            let meanings = topWords.map(item => `${language === 'en' ? item.en : item.vn}: ${language === 'en' ? item.vn : item.en}`);\r\n            const imageURL = chrome.runtime.getURL('images/suggestion.png');\r\n            this.showPopupBox(range, search_word, meanings, imageURL, false);\r\n          } else {\r\n            // Word not found\r\n            const meanings = ['If you want to contribute this word to our website, please click the link.'];\r\n            const imageURL = chrome.runtime.getURL('images/404.png');\r\n            this.showPopupBox(range, search_word, meanings, imageURL, false);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log('Fetch error:', error);\r\n          // Handle fetch error\r\n          const meanings = ['Error fetching data.'];\r\n          const imageURL = chrome.runtime.getURL('images/404.png');\r\n          this.showPopupBox(range, search_word, meanings, imageURL, false);\r\n        });\r\n    }\r\n    userSelection.removeAllRanges();\r\n  }\r\n}\r\nwindow.customElements.define(\"meddict-highlighter\", MedDictHighlighter);"],"names":["styled","display","left","top","template","chrome","runtime","getURL","capitalize","word","charAt","toUpperCase","slice","toLowerCase","lowerCase","VIETNAMESE_CHARACTERS","SEARCH_URL","formatString","args","replace","match","index","MedDictHighlighter","HTMLElement","constructor","render","markerPosition","JSON","parse","getAttribute","styleElement","shadowRoot","querySelector","highlightTemplate","getElementById","observedAttributes","get_language","i","length","includes","preprocessWord","endsWith","base","test","attachShadow","mode","style","document","createElement","textContent","appendChild","innerHTML","addEventListener","highlightSelection","attributeChangedCallback","name","oldValue","newValue","removeAllHighlights","highlights","querySelectorAll","forEach","highlight","parent","parentNode","firstChild","insertBefore","removeChild","createPopupBox","meanings","imageUrl","wordFound","popupBox","classList","add","headerSection","wordHeader","soundButton","className","iconUrl","soundIcon","src","alt","image","Image","meaningsList","meaning","listItem","buttonsContainer","linkButton","target","onclick","encodedWord","encodeURIComponent","googleUrl","href","searchButton","language","wikiUrl","console","log","window","open","showPopupBox","range","existingPopup","remove","rect","getBoundingClientRect","position","scrollY","bottom","scrollX","isClickOutsidePopup","event","contains","closePopupAndReset","findWordInData","data","item","en","vn","userSelection","getSelection","rangeCount","getRangeAt","search_word","toString","trim","url","encodeURI","fetch","then","response","json","filteredData","wordData","imgID","dictWord","audio","Audio","play","catch","error","topWords","map","imageURL","removeAllRanges","customElements","define"],"sourceRoot":""}